# 鰹節原料（B巻網）相場可視化プロトタイプ：完成報告

焼津・枕崎・山川の3拠点の鰹相場を、サイズ別に過去5年分確認できるダッシュボードのプロトタイプが完成しました。

## 開発内容

### 1. データ処理システム (`scripts/katsuo_fetcher.py`)
- **5年分データ対応**: 過去5年間の日付・拠点・サイズ・相場を生成・集計するロジックを実装。
- **サイズ区分**: `1.8kg上`, `2.5kg上`, `4.5kg上` の3区分に特化。
- **データ出力**: 可視化用に最適化された `data/katsuo_market_data.json` を出力。

### 2. 可視化ダッシュボード (`web/`)
- **プレミアムデザイン**: ダークモードを基調とした、モダンで視認性の高いインターフェース。
- **混合グラフ（新機能）**: 単価（折れ線）と水揚量（棒グラフ）を同一グラフ上に表示。供給量と価格の相関が一目で分かります。
- **3拠点別表示**: 焼津・枕崎・山川を独立した3つのグラフで表示し、サイズ区分（1.8+/2.5+/4.5kg上）を網羅。

### 3. データ取得・自動化ツール
- **焼津自動取得 (`scripts/yaizu_scraper.py`)**: 焼津漁協の公式サイトから最新の相場と水揚量を自動で抽出します。
- **CSV連携**: 提供いただいた実データを `data/market_input.csv` に反映済み。手動追記も簡単に行えます。
- ブラウザのセキュリティ制約（CORS）を回避し、ローカル環境でスムーズにダッシュボードを表示するための簡易サーバーを提供。

## 動作確認の手順

1.  **データの準備**:
    ターミナルで `python scripts/katsuo_fetcher.py` を実行（既に生成済みですが、データの更新が可能です）。
2.  **ダッシュボードの起動**:
    ターミナルで `python run_dashboard.py` を実行します。
3.  **ブラウザで確認**:
    表示されたURL（ **[http://localhost:8000/web/index.html](http://localhost:8000/web/index.html)** ）をブラウザで開いてください。

## 他の方への共有方法

このダッシュボードは「静的なWebサイト」として作られているため、いくつかの共有方法があります。

### 1. フォルダごとZIPにして送る（確実な方法）
プロジェクトフォルダ全体をZIP圧縮してメールなどで送ります。
- **相手側の操作**:
  1. ZIPを展開する。
  2. フォルダ内で `python run_dashboard.py` を実行する。
  3. `http://localhost:8000/web/index.html` を開く。
- **メリット**: オフラインでも動く。データが外部に漏れない。

### 2. 静的サイトとしてネット上に公開する（おすすめ）
`GitHub Pages` や `Vercel` などの無料サービスを使うと、**「専用のURL（例: https://katsuo-graph.vercel.app）」**を発行できます。
- **特長**: パソコンに詳しくない方でも、スマホやブラウザからURLを開くだけでグラフが見れます。
- **注意**: データをインターネット上に配置することになるため、社外秘の情報などの場合はパスワード制限などを検討する必要があります。

### 3. スクリーンショットやPDFで共有
ブラウザの印刷機能（Ctrl + P）を使って、グラフをそのままPDFとして保存して配布することも可能です。
- **特長**: 動かなくて良い場合、最も手軽です。

## 今後の拡張（JAFIC実データの統合）
現在のデータは、JAFICの構造と直近の相場水準に基づいたシミュレーションデータです。JAFICの会員データ（CSV等）をお持ちの場合、そのファイルを `data/` 配下に置き、スクリプトの取得ロジックを接続することで、実データの推移に切り替えることができます。
